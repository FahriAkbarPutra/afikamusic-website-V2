{% extends "admin/layout.html.twig" %}

{% block content %}
    <table>
        <thead>
            <tr>
                <th>Tgl. Acara</th>
                <th>Nama Pemesan</th>
                <th>No. HP</th>
                <th>Layanan</th>
                <th>Status</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for booking in bookings %}
            <tr>
                <td>{{ booking.booking_date|date('d M Y') }}</td>
                <td>{{ booking.name }}</td>
                <td>{{ booking.phone }}</td>
                <td>{{ booking.service_name }}</td>
                <td>
                    {# Beri warna berbeda untuk setiap status #}
                    <span style="
                        padding: 5px 10px; 
                        border-radius: 5px; 
                        color: white; 
                        background-color: 
                            {% if booking.status == 'pending' %}#f1c40f 
                            {% elseif booking.status == 'confirmed' %}#2ecc71
                            {% elseif booking.status == 'completed' %}#3498db
                            {% elseif booking.status == 'cancelled' %}#e74c3c
                            {% endif %};
                    ">{{ booking.status|capitalize }}</span>
                </td>
                <td>
                    <form action="/afika-music/public/admin/bookings/update-status/{{ booking.id }}" method="POST" style="display:inline;">
                        <select name="status" onchange="this.form.submit()">
                            <option value="pending" {{ booking.status == 'pending' ? 'selected' : '' }}>Pending</option>
                            <option value="confirmed" {{ booking.status == 'confirmed' ? 'selected' : '' }}>Confirmed</option>
                            <option value="completed" {{ booking.status == 'completed' ? 'selected' : '' }}>Completed</option>
                            <option value="cancelled" {{ booking.status == 'cancelled' ? 'selected' : '' }}>Cancelled</option>
                        </select>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6" style="text-align:center;">Belum ada pesanan yang masuk.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}